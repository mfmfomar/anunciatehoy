function updateImagecomplete(){console.log("complete function")}updateImage=function(e,t){var a,n,i,o;return o=0,Dropzone.autoDiscover=!1,Dropzone.options.portadaForm={headers:{Authorization:localStorage.getItem("token")},maxFilesize:1,parallelUploads:10,uploadMultiple:!0,autoProcessQueue:!1,addRemoveLinks:!0,maxFiles:e,dictResponseError:"Server not Configured",acceptedFiles:".png,.jpg,.gif,.bmp,.jpeg",paramName:"fileImage",init:function(){var e=this;e.options.addRemoveLinks=!0,e.options.dictRemoveFile="Delete",e.on("addedfile",function(e){$(".dz-preview").first().addClass("DZportada"),n=$(".DZportada>.dz-details>.dz-filename>span").html(),$("#imgPortada").val(n),o++,$("#foto").val(o),console.log("new file added ",e)}),e.on("sending",function(e,t,a){a.append("portadaName",n),$("#imgPortada").val(n);for(var o=0;o<i.length;o++)a.append(i[o].name,i[o].value);console.log("upload started",e)}),e.on("totaluploadprogress",function(e){console.log("progress ",e),$("#progres").width(e+"%")}),e.on("complete",function(e){console.log("complete"),0===this.getUploadingFiles().length&&0===this.getQueuedFiles().length&&(console.log("complete All"),t())}),e.on("success",function(e,t){console.log("done"),a.options.autoProcessQueue=!0}),e.on("removedfile",function(e){console.log(e),o--,$(".dz-preview").first().addClass("DZportada"),n=$(".DZportada>.dz-details>.dz-filename>span").html(),$("#imgPortada").val(n),o<1&&$("#foto").val("")})}},a=new Dropzone("#portadaForm"),{enviar:function(e){i=e,a.processQueue()},portadaName:function(){return console.log(n),n}}};var appPerfil=new Vue({el:".table-responsive",created:function(){this.getAnunciosUser()},data:{user:JSON.parse(localStorage.getItem("user")),anuncio:{titulo:"",precio:"",descripcion:"",fecha:"Se publico hace 3 días"},dataDelete:[],anuncios:{},options:{headers:{Authorization:localStorage.getItem("token")}},api:"../api/anunciosUser"},methods:{getAnunciosUser:function(){this.$http.get(this.api,this.options).then(function(e){e.data&&(this.anuncios=e.data.anuncios)},function(e){var t=e.body.message;switch(e.body.code){case 0:case 1:alert(t);break;case 3:this.user.password="",alert(t);break;default:console.log(e.body)}}).catch(function(e){console.log("Caught",e)})},deleteItem:function(){0<this.dataDelete.length&&this.$http.delete(this.api,{headers:{Authorization:localStorage.getItem("token")},body:this.dataDelete}).then(function(e){for(i=0;i<this.dataDelete.length;i++)for(j=0;j<this.anuncios.length;j++)this.anuncios[j]._id==this.dataDelete[i]&&this.anuncios.splice(j,1);this.dataDelete=[]},function(e){e.body.message;console.error(e.body)}).catch(function(e){console.error("Caught",e)})},mostrar:function(e){this.anuncio.titulo=this.anuncios[e].titulo,this.anuncio.usuario=this.user.apellido+" "+this.user.nombre,this.anuncio.nombreUSuario="Elite Author",this.anuncio.precio=this.anuncios[e].precio,this.anuncio.fecha="Se publico hace 3 días",this.anuncio.descripcion=this.anuncios[e].descripcion,this.anuncio.imagen="/publico/assets/img/anuncios/"+this.anuncios[e]._id+"/"+this.anuncios[e].imgPortada,$("#myModal2").modal("toggle")}}}),updateImage=new updateImage(1,updateImagecomplete);$(document).ready(function(){"use strict";function e(e){e.element;return e.id?"<i class='"+$(e.element).data("icon")+"'></i>"+e.text:e.text}$("#eliminar").click(function(){this.hijos=$(".table-responsive").find(".dt-checkboxes"),this.hijos.each(function(){$(this).is(":checked")&&appPerfil.dataDelete.push($(this).parent().parent().attr("index"))}),$("#myModal").modal("toggle")}),$("#add-new-data-sidebar").submit(function(e){var t=$("#add-new-data-sidebar");if(event.preventDefault(),event.stopPropagation(),!1===t[0].checkValidity());else{t.addClass("was-validated");var a=$("#add-new-data-sidebar").serializeArray();updateImage.enviar(a)}}),$("#nuevo").click(function(e){$("#enviar").click()});$(".data-list-view").DataTable({responsive:!1,columnDefs:[{orderable:!0,targets:0,checkboxes:{selectRow:!0}}],dom:'<"top"<"actions action-btns"B><"action-filters"lf>><"clear">rt<"bottom"<"actions">p>',oLanguage:{sLengthMenu:"_MENU_",sSearch:""},aLengthMenu:[[4,10,15,20],[4,10,15,20]],select:{selector:"td:first-child",style:"multi"},order:[[1,"asc"]],bInfo:!1,pageLength:4,buttons:[{text:"<div data-i18n='Añadir nuevo' ><i class='feather icon-plus'></i> Añadir nuevo</div",action:function(){location.href="/publicar"},className:"btn-outline-primary"}],initComplete:function(e,t){$(".dt-buttons .btn").removeClass("btn-secondary")}}),$(".data-thumb-view").DataTable({responsive:!1,columnDefs:[{orderable:!0,targets:0,checkboxes:{selectRow:!0}}],dom:'<"top"<"actions action-btns"B><"action-filters"lf>><"clear">rt<"bottom"<"actions">p>',oLanguage:{sLengthMenu:"_MENU_",sSearch:""},aLengthMenu:[[4,10,15,20],[4,10,15,20]],select:{selector:"td:first-child",style:"multi"},order:[[1,"asc"]],bInfo:!1,pageLength:4,buttons:[{text:"<div data-i18n='Añadir nuevo'><i class='feather icon-plus'></i> Añadir nuevo</div",action:function(){$(this).removeClass("btn-secondary"),$(".add-new-data").addClass("show"),$(".overlay-bg").addClass("show")},className:"btn-outline-primary"}],initComplete:function(e,t){$(".dt-buttons .btn").removeClass("btn-secondary")}});$(".actions-dropodown").insertBefore($(".top .actions .dt-buttons")),$(".data-list-view, .data-thumb-view").on("click","tbody td",function(){var e=$(this).parent("tr").find(".dt-checkboxes-cell .dt-checkboxes");$(this).closest("tr").toggleClass("selected"),e.prop("checked",!e.prop("checked"))}),$(".dt-checkboxes").on("click",function(){$(this).closest("tr").toggleClass("selected")}),$(".dt-checkboxes-select-all input").on("click",function(){$(".data-list-view").find("tbody tr").toggleClass("selected"),$(".data-thumb-view").find("tbody tr").toggleClass("selected")}),0<$(".data-items").length&&new PerfectScrollbar(".data-items",{wheelPropagation:!1}),$(".hide-data-sidebar, .cancel-data-btn").on("click",function(){$(".add-new-data").removeClass("show"),$(".overlay-bg").removeClass("show"),$("#data-name, #data-price").val(""),$("#data-category, #data-status").prop("selectedIndex",0)}),-1!=navigator.userAgent.indexOf("Mac OS X")&&$(".dt-checkboxes-cell input, .dt-checkboxes").addClass("mac-checkbox"),$(".select2-icons").select2({minimumResultsForSearch:1/0,templateResult:e,templateSelection:e,escapeMarkup:function(e){return e}})});