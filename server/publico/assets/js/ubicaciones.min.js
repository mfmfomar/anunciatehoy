function link(a){app.link(a)}function makeGaleria(a){console.log(a);var e="",o=a.tipo+"/"+a._id+"/galeria/";try{return a.galeria.forEach(function(a){e+='<div class="property-slide">                <a >                    <div class="overlay"><h3>'+a.f+'</h3></div>                    <img alt="No encontrada" src="publico/assets/img/ubicaciones/'+o+a.f+'">                </a>            </div>'}),e}catch(a){}}function regresar(){$(".owl-carousel").trigger("owl.stop"),$(".principal").show(),$(".detalles").fadeOut("slow")}function joinData(a,e){try{for(var o in a){var t=new RegExp("{"+o+"}","g");e=e.replace(t,a[o])}return e}catch(a){console.log(a.message)}}function carrusel(){function a(){$(".owl-carousel .property").css("pointer-events","none")}function e(){$(".owl-carousel .property").css("pointer-events","auto")}function o(){var a=$(".slide .overlay .info");a.addClass("animate-description-out"),a.removeClass("animate-description-in"),setTimeout(function(){a.addClass("animate-description-in")},200)}0<$(".owl-carousel").length&&(0<$(".carousel-full-width").length&&setCarouselWidth(),$(".featured-properties-carousel").owlCarousel({items:10,itemsDesktop:[1700,4],responsiveBaseWidth:".featured-properties-carousel",pagination:!1,startDragging:a,beforeMove:e}),$(".testimonials-carousel").owlCarousel({items:1,responsiveBaseWidth:".testimonial",pagination:!0}),$(".property-carousel").owlCarousel({items:1,responsiveBaseWidth:".property-slide",pagination:!1,autoHeight:!0,navigation:!0,navigationText:["",""],startDragging:a,beforeMove:e}),$(".homepage-slider").owlCarousel({autoPlay:5e3,navigation:!0,mouseDrag:!1,items:1,responsiveBaseWidth:".slide",pagination:!1,transitionStyle:"fade",navigationText:["",""],afterInit:function(){$("#slider").removeClass("loading"),document.getElementById("loading-icon").remove()},afterAction:o,startDragging:o}))}$(document).ready(function(){$("#ubicacionesMapa").on("hidden.bs.modal",function(){lugar.mapa.limpiarMapa();var str=localStorage.getItem("filtroUbicaciones");for(var clave in eval("var json = "+str+";"),json)1==json[clave][2]&&lugar.mapa.setData(json[clave][3])})}),$.get("publico/assets/templates/_Detalles.html",function(a){cascaronDetalles=a},"html");var app=new Vue({el:"#ubicacionesMapa",created:function(){function UpdateMarker(on,data){var str=localStorage.getItem("filtroUbicaciones");eval("var json = "+str+";"),"newProperty"==on&&json[data.tipo][2]&&lugar.mapa.addMarker(data),"upDateUbicacion"==on&&json[data.tipo][2]&&lugar.mapa.update(data),"deleteProperty"==on&&json[data.tipo][2]&&lugar.mapa.delete(data._id)}lugar.mapa=new MAPA("publico/assets/img/"),lugar.mapa.initialize(),$(".geo-location").click(function(a){lugar.mapa.UbicacionActual()});var socket=io.connect(location.host,{forceNew:!0});socket.on("nuevaUbicacion",function(a){UpdateMarker("newProperty",a)}),socket.on("upDateUbicacion",function(a){UpdateMarker("upDateUbicacion",a)}),socket.on("deleteProperty",function(a){UpdateMarker("deleteProperty",a)}),this.init()},data:{filtroUbicaciones:{casa:["Casa","casa.png",!0,"casa"],compartido:["compartido","compartido.png",!0,"compartido"],departamento:["Departamento","departamento.png",!0,"departamento"],hostal:["Hostal","hostal.png",!0,"hostal"],hotel:["Hotel","hotel.png",!0,"hotel"],motel:["Motel","motel.png",!0,"motel"],oficina:["Oficina","oficina.png",!0,"oficina"],terreno:["Terreno","terreno.png",!0,"terreno"]}},methods:{init:function(){if(null==localStorage.getItem("filtroUbicaciones")||""==localStorage.getItem("filtroUbicaciones")){var a=JSON.stringify(this.filtroUbicaciones);localStorage.setItem("filtroUbicaciones",a)}else this.filtroUbicaciones=JSON.parse(localStorage.getItem("filtroUbicaciones"));$("#dropdownubicacionesMapa").css("display","contents"),this.loadUbicaciones()},guardar:function(a){var e=JSON.stringify(this.filtroUbicaciones);localStorage.setItem("filtroUbicaciones",e)},loadUbicaciones:function(){var str=localStorage.getItem("filtroUbicaciones");for(var clave in eval("var json = "+str+";"),json){json[clave][2];var path=lugar.server+"api/ubicaciones",tipo=json[clave][3];$.ajax({url:path,method:"GET",data:{clave:tipo}}).done(function(a){null!=a.ubicacion&&app.loaded(a.ubicacion,a.tipo)})}},loaded:function(data,tipo){data.propiedad=data,lugar.mapa.addMarkers(data,tipo);var str=localStorage.getItem("filtroUbicaciones");eval("var json = "+str+";"),json[tipo][2]&&lugar.mapa.setData(tipo)},link:function(a){url="api/ubicacion/"+a,$.get(url,function(a){a.usuario&&(a.propiedad.nombreUsusario=a.usuario.nombre+" "+a.usuario.apellido,a.propiedad.telefono=a.usuario.telefono,a.propiedad.correo=a.usuario.correo,a.propiedad.nombre=""),a.propiedad.carrusel=makeGaleria(a.propiedad),html=joinData(a.propiedad,cascaronDetalles),$(".principal").fadeOut(500),$(".detalles").fadeIn(500),$(".detalles").html(html),carrusel(),$(".owl-carousel").trigger("owl.play",3e3),a.usuario||$("#property-usuer").empty()}),setTimeout(function(){i18next.changeLanguage(localStorage.getItem("i18next"),function(a,e){$("body").localize()})},500)}}});